{% extends 'base.html' %}

{% block title %}
  КМ/Ч 120 - Інтернет-магазин шин та дисків
{% endblock %}

{% block content %}
  <!-- Hero Section with Selector -->
  <section class="hero">
    <div class="hero-content">
      <div class="hero-title">
        <h1>Підбір шин та дисків</h1>
        <div class="tab-toggle">
          <button class="tab-btn active" onclick="showTab('tires')" id="tab-tires">ШИНИ</button>
          <button class="tab-btn" onclick="showTab('disks')" id="tab-disks">ДИСКИ</button>
        </div>
      </div>

      <!-- Tire Filter Form -->
      <div class="filter-bar" id="filter-tires">
        <form method="get" action="{% url 'catalog:tire_list' %}">
          <div class="filter-grid">
            <div class="filter-item-select">
              <label>Діаметр</label>
              <select name="diameter">
                <option value="">Всі</option>
                {% for d in tire_filters.diameters %}
                  <option value="{{ d }}">R{{ d }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Ширина</label>
              <select name="width">
                <option value="">Всі</option>
                {% for w in tire_filters.widths %}
                  <option value="{{ w }}">{{ w }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Профіль</label>
              <select name="profile">
                <option value="">Всі</option>
                {% for p in tire_filters.profiles %}
                  <option value="{{ p }}">{{ p }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Сезон</label>
              <select name="season">
                <option value="">Всі</option>
                {% for value, label in tire_filters.seasons %}
                  <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Бренд</label>
              <select name="brand">
                <option value="">Всі</option>
                {% for brand in tire_filters.brands %}
                  <option value="{{ brand.slug }}">{{ brand.name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <button type="submit" class="filter-submit">Підібрати шини</button>
        </form>
      </div>

      <!-- Disk Filter Form -->
      <div class="filter-bar" id="filter-disks" style="display: none;">
        <form method="get" action="{% url 'catalog:disk_list' %}">
          <div class="filter-grid">
            <div class="filter-item-select">
              <label>Діаметр</label>
              <select name="diameter">
                <option value="">Всі</option>
                {% for d in disk_filters.diameters %}
                  <option value="{{ d }}">{{ d }}"</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Ширина</label>
              <select name="width">
                <option value="">Всі</option>
                {% for w in disk_filters.widths %}
                  <option value="{{ w }}">{{ w }}J</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>PCD</label>
              <select name="pcd">
                <option value="">Всі</option>
                {% for p in disk_filters.pcds %}
                  <option value="{{ p }}">{{ p }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Тип</label>
              <select name="type">
                <option value="">Всі</option>
                {% for value, label in disk_filters.types %}
                  <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="filter-item-select">
              <label>Бренд</label>
              <select name="brand">
                <option value="">Всі</option>
                {% for brand in disk_filters.brands %}
                  <option value="{{ brand.slug }}">{{ brand.name }}</option>
                {% endfor %}
              </select>
            </div>
          </div>
          <button type="submit" class="filter-submit">Підібрати диски</button>
        </form>
      </div>
    </div>
  </section>

  <!-- Benefits -->
  <section class="section-sm">
    <div class="container">
      <div class="info-grid">
        <div class="info-box">
          <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <rect x="1" y="3" width="15" height="13"></rect>
            <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
            <circle cx="5.5" cy="18.5" r="2.5"></circle>
            <circle cx="18.5" cy="18.5" r="2.5"></circle>
          </svg>
          <span class="info-text">Безкоштовна доставка від 2000 ₴</span>
        </div>
        <div class="info-box">
          <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            <polyline points="9 12 11 14 15 10"></polyline>
          </svg>
          <span class="info-text">Гарантія якості на всі товари</span>
        </div>
        <div class="info-box">
          <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <polyline points="23 4 23 10 17 10"></polyline>
            <polyline points="1 20 1 14 7 14"></polyline>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
          </svg>
          <span class="info-text">14 днів на обмін або повернення</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products -->
  <section class="section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Рекомендовані товари</h2>
        <a href="{% url 'catalog:tire_list' %}" class="btn btn-secondary">Всі шини →</a>
      </div>

      <div class="products-grid">
        {% for tire in featured_tires %}
          <a href="{% url 'catalog:tire_detail' tire.slug %}" class="product-card-link">
            <div class="product-card">
              <div class="product-image">
                {% if tire.image %}
                  <img src="{{ tire.image.url }}" alt="{{ tire }}" />
                {% else %}
                  <img src="https://picsum.photos/seed/tire{{ tire.id }}/400/400" alt="{{ tire }}" />
                {% endif %}
              </div>
              <h3 class="product-name">{{ tire }}</h3>
              <div class="product-price">{{ tire.price|floatformat:0 }} ₴</div>
              <div class="product-footer">
                {% if tire.in_stock %}
                  <span class="product-status available">В наявності</span>
                {% else %}
                  <span class="product-status pre-order">Під замовлення</span>
                {% endif %}
                <button class="cart-add-btn" onclick="addToCart('tire', {{ tire.id }}, event)" title="Додати в кошик">
                  <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <path d="M16 10a4 4 0 0 1-8 0"></path>
                  </svg>
                </button>
              </div>
            </div>
          </a>
        {% empty %}
          <p style="grid-column: 1/-1; text-align: center; color: var(--text-gray);">Товари скоро з'являться</p>
        {% endfor %}
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section class="section-sm">
    <div class="container">
      <h2 class="section-title" style="margin-bottom: 1.5rem;">Каталог</h2>
      <div class="category-grid">
        <a href="{% url 'catalog:tire_list' %}?season=winter" class="category-large">
          <img src="https://images.unsplash.com/photo-1568844293986-8c1a5f12717b?auto=format&fit=crop&q=80&w=1000" alt="Зимові шини" />
          <div class="category-label-container">
            <span class="category-label">Зимові шини</span>
          </div>
        </a>
        <div class="category-small">
          <a href="{% url 'catalog:disk_list' %}" class="category-item">
            <img src="https://images.unsplash.com/photo-1611016186353-9af58c69a533?auto=format&fit=crop&q=80&w=800" alt="Диски" />
            <div class="category-label-container-sm">
              <span class="category-label-sm">Литі диски</span>
            </div>
          </a>
          <a href="{% url 'catalog:tire_list' %}?season=summer" class="category-item">
            <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&q=80&w=800" alt="Літні шини" />
            <div class="category-label-container-sm">
              <span class="category-label-sm">Літні шини</span>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- About -->
  <section class="section content-section">
    <div class="container-narrow">
      <h2 class="section-title-centered">Про магазин КМ/Ч 120</h2>
      <div class="content-text" style="text-align: center;">
        <p>Ми спеціалізуємось на продажу якісних шин та дисків від провідних світових виробників. Працюємо з 2020 року та маємо власний склад у Києві.</p>
        <p>Наші менеджери допоможуть підібрати оптимальний варіант саме для вашого автомобіля. Гарантуємо оригінальність товару та швидку доставку по всій Україні.</p>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section class="section-sm content-section">
    <div class="container-narrow">
      <h2 class="section-title-centered">Зв'язатися з нами</h2>
      <div class="content-text" style="text-align: center;">
        <p class="contact-phone">
          <a href="tel:+380963870223">+38 (096) 38-70-223</a><br />
          <a href="tel:+380508572399">+38 (050) 857-23-99</a>
        </p>
        <p>Пн-Пт: 9:00 - 18:00 | Сб: 9:00 - 15:00</p>
      </div>
    </div>
  </section>

  <script>
    function showTab(tab) {
      const tiresFilter = document.getElementById('filter-tires');
      const disksFilter = document.getElementById('filter-disks');
      const tabTires = document.getElementById('tab-tires');
      const tabDisks = document.getElementById('tab-disks');

      if (tab === 'tires') {
        tiresFilter.style.display = 'block';
        disksFilter.style.display = 'none';
        tabTires.classList.add('active');
        tabDisks.classList.remove('active');
      } else {
        tiresFilter.style.display = 'none';
        disksFilter.style.display = 'block';
        tabTires.classList.remove('active');
        tabDisks.classList.add('active');
      }
    }
  </script>
{% endblock %}
